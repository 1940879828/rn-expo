# React Native 区块链钱包开发学习路径

## 📚 学习目标

通过本学习路径，你将掌握使用 React Native + Expo 开发一个完整的区块链钱包应用，运行在本地 Ganache 测试网络上，使用 wagmi、web3.js 和 ethers.js 等 Web3 库。

---

## 第一阶段：React Native 基础（1-2 周）

### 1.1 React Native 核心概念

**学习目标**：理解 React Native 与 React Web 的区别，掌握移动端开发基础

**实践内容**：

- [ ] 创建一个简单的欢迎页面组件
- [ ] 理解 JSX 在 React Native 中的使用
- [ ] 掌握 React Native 的基础组件（View, Text, Image, ScrollView）

**实现要求**：

- 创建一个 `WelcomeScreen.tsx` 组件
- 显示标题、副标题和一张图片
- 使用 StyleSheet 进行样式设置

---

### 1.2 Expo 框架使用

**学习目标**：掌握 Expo 开发工具链，理解 Expo Router 路由系统

**实践内容**：

- [ ] 运行 `expo start` 启动开发服务器
- [ ] 在 iOS 模拟器和 Android 模拟器上运行应用
- [ ] 理解 Expo Router 的文件系统路由
- [ ] 创建多个页面并使用导航

**实现要求**：

- 创建三个页面：首页、钱包页面、设置页面
- 使用 Expo Router 的 `<Link>` 组件进行页面跳转
- 配置底部标签导航（tabs）

---

### 1.3 React Native 样式系统

**学习目标**：掌握 React Native 的样式编写方式，理解 Flexbox 布局

**实践内容**：

- [ ] 使用 StyleSheet.create 创建样式
- [ ] 理解 Flexbox 在移动端的布局规则
- [ ] 实现响应式布局
- [ ] 使用主题系统（深色/浅色模式）

**实现要求**：

- 创建一个可复用的主题组件
- 实现一个卡片组件，支持深色/浅色模式切换
- 使用 Flexbox 实现一个三列网格布局

---

### 1.4 React Native 状态管理

**学习目标**：掌握 React Hooks 在 React Native 中的使用，理解状态管理

**实践内容**：

- [ ] 使用 useState 管理组件状态
- [ ] 使用 useEffect 处理副作用
- [ ] 使用 useContext 实现全局状态
- [ ] 使用自定义 Hooks 封装逻辑

**实现要求**：

- 创建一个用户信息管理 Context
- 实现一个计数器组件，使用 useState
- 创建一个自定义 Hook `useWallet` 用于管理钱包状态

---

### 1.5 React Native 表单处理

**学习目标**：掌握在移动端处理用户输入，表单验证

**实践内容**：

- [ ] 使用 TextInput 组件
- [ ] 实现表单验证逻辑
- [ ] 处理键盘显示/隐藏
- [ ] 实现密码输入框（显示/隐藏密码）

**实现要求**：

- 创建一个登录表单组件
- 实现邮箱和密码验证
- 添加错误提示信息显示

---

### 1.6 React Native 导航系统

**学习目标**：掌握 Expo Router 的导航功能，理解堆栈导航和标签导航

**实践内容**：

- [ ] 配置堆栈导航（Stack Navigator）
- [ ] 配置标签导航（Tab Navigator）
- [ ] 实现页面间参数传递
- [ ] 实现模态页面（Modal）

**实现要求**：

- 创建钱包详情页面，支持从列表页传递参数
- 实现一个模态页面用于显示交易详情
- 配置底部标签栏，包含：首页、钱包、交易、设置

---

### 1.7 React Native 数据持久化

**学习目标**：掌握在移动端存储数据，使用 AsyncStorage

**实践内容**：

- [ ] 安装和使用 @react-native-async-storage/async-storage
- [ ] 实现数据的保存和读取
- [ ] 处理异步存储的错误情况
- [ ] 实现数据加密存储

**实现要求**：

- 创建一个存储工具类 `Storage.ts`
- 实现钱包地址的本地存储
- 实现应用设置的持久化（主题、语言等）

---

### 1.8 React Native 网络请求

**学习目标**：掌握在 React Native 中发送 HTTP 请求

**实践内容**：

- [ ] 使用 fetch API 发送请求
- [ ] 处理网络错误和超时
- [ ] 实现请求拦截器
- [ ] 使用 axios 库（可选）

**实现要求**：

- 创建一个 API 工具类 `api.ts`
- 实现获取以太坊价格的接口调用
- 处理网络错误，显示友好的错误提示

---

## 第二阶段：Web3 基础（1-2 周）

### 2.1 区块链基础概念

**学习目标**：理解区块链、以太坊、账户、交易等核心概念

**实践内容**：

- [ ] 阅读以太坊白皮书核心概念
- [ ] 理解公钥、私钥、地址的关系
- [ ] 理解 Gas、Gas Price、Gas Limit
- [ ] 理解交易和区块的概念

**实现要求**：

- 创建一个学习笔记页面，展示区块链基础概念
- 实现一个概念解释组件，可以展开/收起详细说明

---

### 2.2 Ganache 本地测试网络

**学习目标**：掌握 Ganache 的安装和使用，创建本地测试环境

**实践内容**：

- [ ] 安装 Ganache（GUI 或 CLI 版本）
- [ ] 启动本地测试网络
- [ ] 创建测试账户
- [ ] 获取测试账户的私钥和地址
- [ ] 理解 RPC 端点（HTTP 和 WebSocket）

**实现要求**：

- 配置 Ganache，创建 10 个测试账户
- 记录 RPC 端点地址（通常是 http://127.0.0.1:7545）
- 在应用中显示当前连接的网络信息

---

### 2.3 Web3.js 基础

**学习目标**：掌握 Web3.js 库的基本使用，连接区块链网络

**实践内容**：

- [ ] 安装 web3.js 库
- [ ] 创建 Web3 实例，连接到 Ganache
- [ ] 获取账户余额
- [ ] 获取当前区块号
- [ ] 获取 Gas Price

**实现要求**：

- 创建一个 `web3Service.ts` 工具类
- 实现 `getBalance(address: string)` 方法
- 实现 `getBlockNumber()` 方法
- 在应用中显示当前网络信息和区块号

---

### 2.4 Ethers.js 基础

**学习目标**：掌握 Ethers.js 库的使用，理解 Provider 和 Signer

**实践内容**：

- [ ] 安装 ethers.js 库
- [ ] 创建 Provider（连接到 Ganache）
- [ ] 创建 Wallet 实例（使用私钥）
- [ ] 获取账户余额和交易历史
- [ ] 理解 Provider 和 Signer 的区别

**实现要求**：

- 创建一个 `ethersService.ts` 工具类
- 实现 `createWallet(privateKey: string)` 方法
- 实现 `getBalance(address: string)` 方法
- 创建一个钱包连接组件，显示账户地址和余额

---

### 2.5 账户和钱包管理

**学习目标**：掌握创建、导入、导出钱包的方法

**实践内容**：

- [ ] 使用 ethers.js 创建新钱包
- [ ] 从助记词恢复钱包
- [ ] 从私钥导入钱包
- [ ] 导出钱包信息（地址、私钥、助记词）
- [ ] 实现钱包加密存储

**实现要求**：

- 创建 `WalletManager.ts` 类
- 实现 `createNewWallet()` 方法
- 实现 `importFromMnemonic(mnemonic: string)` 方法
- 实现 `importFromPrivateKey(privateKey: string)` 方法
- 创建一个钱包创建/导入页面

---

### 2.6 发送交易

**学习目标**：掌握构建和发送以太坊交易

**实践内容**：

- [ ] 构建交易对象（to, value, gasLimit, gasPrice）
- [ ] 签名交易
- [ ] 发送交易到网络
- [ ] 等待交易确认
- [ ] 获取交易回执（receipt）

**实现要求**：

- 在 `ethersService.ts` 中实现 `sendTransaction()` 方法
- 创建一个发送交易页面
- 实现交易表单（接收地址、金额、Gas 设置）
- 显示交易状态（pending、confirmed、failed）
- 显示交易哈希和确认数

---

### 2.7 交易历史查询

**学习目标**：掌握查询账户的交易历史

**实践内容**：

- [ ] 使用 Provider 查询交易历史
- [ ] 过滤特定地址的交易
- [ ] 解析交易数据
- [ ] 显示交易详情（发送方、接收方、金额、Gas 费用）

**实现要求**：

- 实现 `getTransactionHistory(address: string)` 方法
- 创建交易历史列表页面
- 实现交易详情页面
- 显示交易状态、时间、金额等信息

---

### 2.8 事件监听

**学习目标**：掌握监听区块链事件，实时更新数据

**实践内容**：

- [ ] 监听新区块事件
- [ ] 监听特定地址的余额变化
- [ ] 监听交易确认事件
- [ ] 实现 WebSocket 连接（如果 Ganache 支持）

**实现要求**：

- 实现 `subscribeToNewBlocks()` 方法
- 实现 `subscribeToBalance(address: string)` 方法
- 在钱包页面实时更新余额
- 在交易历史页面实时添加新交易

---

## 第三阶段：Wagmi 集成（1 周）

### 3.1 Wagmi 基础概念

**学习目标**：理解 Wagmi 的设计理念，Hooks 模式

**实践内容**：

- [ ] 阅读 Wagmi 文档
- [ ] 理解 Wagmi 的配置系统
- [ ] 理解 Wagmi 的 Hooks API
- [ ] 理解 Wagmi 与 React Query 的集成

**实现要求**：

- 创建一个学习笔记，记录 Wagmi 的核心概念
- 列出常用的 Wagmi Hooks

---

### 3.2 Wagmi 配置

**学习目标**：配置 Wagmi 连接到 Ganache 网络

**实践内容**：

- [ ] 安装 wagmi 和 viem 库
- [ ] 创建 Wagmi 配置
- [ ] 配置 Ganache 网络信息
- [ ] 设置 WagmiProvider

**实现要求**：

- 创建 `wagmi.config.ts` 配置文件
- 配置 Ganache 网络（chainId, rpcUrls）
- 在应用根组件中包裹 WagmiProvider
- 验证连接是否成功

---

### 3.3 使用 Wagmi Hooks

**学习目标**：掌握使用 Wagmi Hooks 获取链上数据

**实践内容**：

- [ ] 使用 `useAccount` 获取当前账户
- [ ] 使用 `useBalance` 获取账户余额
- [ ] 使用 `useNetwork` 获取网络信息
- [ ] 使用 `useBlockNumber` 获取当前区块号

**实现要求**：

- 创建一个钱包信息组件，使用 Wagmi Hooks
- 显示账户地址、余额、网络信息
- 实现余额自动刷新

---

### 3.4 连接钱包

**学习目标**：使用 Wagmi 实现钱包连接功能

**实践内容**：

- [ ] 使用 `useConnect` Hook 连接钱包
- [ ] 使用 `useDisconnect` Hook 断开连接
- [ ] 实现连接状态管理
- [ ] 处理连接错误

**实现要求**：

- 创建钱包连接页面
- 实现"连接钱包"按钮
- 显示连接状态（已连接/未连接）
- 实现断开连接功能

---

### 3.5 发送交易（Wagmi）

**学习目标**：使用 Wagmi 发送交易

**实践内容**：

- [ ] 使用 `useSendTransaction` Hook
- [ ] 构建交易参数
- [ ] 处理交易状态（idle, loading, success, error）
- [ ] 等待交易确认

**实现要求**：

- 使用 Wagmi 重构发送交易功能
- 实现交易状态显示
- 显示交易哈希和确认数
- 处理交易失败情况

---

### 3.6 查询交易历史（Wagmi）

**学习目标**：使用 Wagmi 查询交易历史

**实践内容**：

- [ ] 使用 `useTransaction` 查询单个交易
- [ ] 使用自定义 Hook 查询交易列表
- [ ] 实现交易列表的分页
- [ ] 缓存和刷新交易数据

**实现要求**：

- 使用 Wagmi 重构交易历史功能
- 实现交易列表页面
- 实现下拉刷新功能
- 实现交易详情页面

---

## 第四阶段：钱包应用开发（2-3 周）

### 4.1 项目架构设计

**学习目标**：设计钱包应用的整体架构

**实践内容**：

- [ ] 规划项目目录结构
- [ ] 设计状态管理方案
- [ ] 设计 API 服务层
- [ ] 设计组件层次结构

**实现要求**：

- 创建项目目录结构：
  ```
  /app
  /components
    /wallet
    /transaction
    /common
  /services
    /web3
    /storage
  /hooks
  /utils
  /types
  ```
- 创建类型定义文件 `types/wallet.ts`
- 创建常量文件 `constants/networks.ts`

---

### 4.2 钱包创建流程

**学习目标**：实现完整的钱包创建流程

**实践内容**：

- [ ] 设计钱包创建页面 UI
- [ ] 实现助记词生成
- [ ] 实现助记词验证（用户确认）
- [ ] 实现钱包密码设置
- [ ] 实现钱包加密存储

**实现要求**：

- 创建钱包创建页面 `/app/wallet/create.tsx`
- 使用 ethers.js 生成 12 词助记词
- 实现助记词显示页面（每个词可点击确认）
- 实现密码设置页面
- 使用加密库加密存储私钥

---

### 4.3 钱包导入流程

**学习目标**：实现钱包导入功能

**实践内容**：

- [ ] 设计钱包导入页面 UI
- [ ] 实现私钥导入
- [ ] 实现助记词导入
- [ ] 验证导入的钱包有效性
- [ ] 处理导入错误

**实现要求**：

- 创建钱包导入页面 `/app/wallet/import.tsx`
- 实现私钥输入表单（支持粘贴）
- 实现助记词输入表单（12 个输入框）
- 验证私钥/助记词格式
- 显示导入的钱包地址预览

---

### 4.4 钱包列表页面

**学习目标**：实现钱包管理界面

**实践内容**：

- [ ] 设计钱包列表 UI
- [ ] 显示多个钱包（地址、余额、名称）
- [ ] 实现钱包切换功能
- [ ] 实现钱包删除功能
- [ ] 实现钱包重命名功能

**实现要求**：

- 创建钱包列表页面 `/app/wallet/list.tsx`
- 使用 FlatList 显示钱包列表
- 实现钱包卡片组件
- 实现长按菜单（删除、重命名、导出）
- 实现钱包切换功能

---

### 4.5 钱包详情页面

**学习目标**：显示钱包详细信息

**实践内容**：

- [ ] 设计钱包详情页面 UI
- [ ] 显示钱包地址（支持复制）
- [ ] 显示钱包余额（实时更新）
- [ ] 显示网络信息
- [ ] 实现二维码显示（用于接收）

**实现要求**：

- 创建钱包详情页面 `/app/wallet/[address].tsx`
- 实现地址复制功能
- 实现二维码生成（使用 react-native-qrcode-svg）
- 显示余额（ETH 和 USD 价值）
- 实现刷新余额按钮

---

### 4.6 发送交易页面

**学习目标**：实现完整的发送交易功能

**实践内容**：

- [ ] 设计发送交易页面 UI
- [ ] 实现接收地址输入（支持二维码扫描）
- [ ] 实现金额输入（ETH）
- [ ] 实现 Gas 设置（自动/手动）
- [ ] 实现交易预览
- [ ] 实现交易确认
- [ ] 实现交易结果展示

**实现要求**：

- 创建发送交易页面 `/app/transaction/send.tsx`
- 实现地址输入验证（以太坊地址格式）
- 实现金额输入（支持 ETH 单位）
- 计算并显示 Gas 费用
- 实现交易预览弹窗
- 使用 Wagmi 发送交易
- 显示交易进度和结果

---

### 4.7 交易历史页面

**学习目标**：实现交易历史查看功能

**实践内容**：

- [ ] 设计交易历史页面 UI
- [ ] 实现交易列表（发送/接收）
- [ ] 实现交易筛选（全部/发送/接收）
- [ ] 实现交易搜索
- [ ] 实现下拉刷新
- [ ] 实现上拉加载更多

**实现要求**：

- 创建交易历史页面 `/app/transaction/history.tsx`
- 使用 FlatList 显示交易列表
- 实现交易卡片组件（显示发送方、接收方、金额、时间、状态）
- 实现筛选功能
- 实现下拉刷新
- 实现分页加载

---

### 4.8 交易详情页面

**学习目标**：显示交易详细信息

**实践内容**：

- [ ] 设计交易详情页面 UI
- [ ] 显示交易哈希（支持复制和查看区块浏览器）
- [ ] 显示交易状态（pending/confirmed/failed）
- [ ] 显示交易详细信息（发送方、接收方、金额、Gas 费用、时间戳）
- [ ] 显示交易确认数

**实现要求**：

- 创建交易详情页面 `/app/transaction/[hash].tsx`
- 显示所有交易信息
- 实现复制功能
- 实现区块浏览器链接（虽然 Ganache 没有，但可以预留）
- 实时更新交易状态和确认数

---

### 4.9 设置页面

**学习目标**：实现应用设置功能

**实践内容**：

- [ ] 设计设置页面 UI
- [ ] 实现网络切换（Ganache 测试网络）
- [ ] 实现主题切换（深色/浅色）
- [ ] 实现语言设置
- [ ] 实现关于页面
- [ ] 实现清除数据功能

**实现要求**：

- 创建设置页面 `/app/settings.tsx`
- 实现网络选择器（显示当前网络：Ganache Local）
- 实现主题切换开关
- 实现清除所有数据功能（删除所有钱包）
- 显示应用版本信息

---

### 4.10 安全功能

**学习目标**：实现钱包安全相关功能

**实践内容**：

- [ ] 实现应用锁定功能（密码/生物识别）
- [ ] 实现私钥导出（加密显示）
- [ ] 实现助记词导出（加密显示）
- [ ] 实现交易密码确认
- [ ] 实现安全提示

**实现要求**：

- 集成 react-native-biometrics 或类似库
- 实现应用启动时的密码/指纹验证
- 实现私钥/助记词导出页面（需要密码确认）
- 在发送交易前要求密码确认
- 添加安全提示页面

---

### 4.11 错误处理和用户体验

**学习目标**：优化错误处理和用户体验

**实践内容**：

- [ ] 实现全局错误处理
- [ ] 实现网络错误提示
- [ ] 实现加载状态显示
- [ ] 实现空状态显示
- [ ] 实现 Toast 提示
- [ ] 实现确认对话框

**实现要求**：

- 创建错误边界组件
- 实现 Toast 组件（使用 react-native-toast-message）
- 实现加载指示器
- 实现空状态组件
- 实现确认对话框组件
- 在所有关键操作中添加错误处理

---

### 4.12 测试和优化

**学习目标**：测试应用功能，优化性能

**实践内容**：

- [ ] 测试所有功能流程
- [ ] 测试错误场景
- [ ] 优化列表渲染性能
- [ ] 优化图片加载
- [ ] 实现代码分割
- [ ] 添加日志系统

**实现要求**：

- 创建测试用例文档
- 测试钱包创建、导入、删除流程
- 测试发送交易流程
- 测试交易历史加载
- 使用 React.memo 优化组件
- 实现日志记录系统

---

## 第五阶段：高级功能（可选，1-2 周）

### 5.1 多网络支持

**学习目标**：支持多个测试网络

**实践内容**：

- [ ] 配置多个网络（Ganache、Sepolia、Goerli）
- [ ] 实现网络切换功能
- [ ] 保存用户选择的网络
- [ ] 显示当前网络信息

**实现要求**：

- 扩展网络配置，支持多个测试网络
- 实现网络切换页面
- 在应用顶部显示当前网络标识

---

### 5.2 ERC-20 代币支持

**学习目标**：支持查看和发送 ERC-20 代币

**实践内容**：

- [ ] 理解 ERC-20 标准
- [ ] 实现代币余额查询
- [ ] 实现代币转账
- [ ] 实现代币列表显示

**实现要求**：

- 在 Ganache 上部署测试 ERC-20 代币
- 实现代币余额查询功能
- 实现代币转账功能
- 创建代币列表页面

---

### 5.3 交易签名

**学习目标**：实现交易签名和验证

**实践内容**：

- [ ] 理解交易签名原理
- [ ] 实现交易签名功能
- [ ] 实现签名验证
- [ ] 实现离线签名

**实现要求**：

- 实现交易签名功能
- 实现签名验证页面
- 实现离线签名功能（不发送交易，只签名）

---

### 5.4 批量交易

**学习目标**：实现批量发送交易

**实践内容**：

- [ ] 设计批量交易 UI
- [ ] 实现批量交易构建
- [ ] 实现批量交易发送
- [ ] 实现批量交易状态跟踪

**实现要求**：

- 创建批量交易页面
- 实现交易列表输入（多个接收地址和金额）
- 实现批量发送功能
- 显示每个交易的状态

---

## 📝 学习检查清单

### React Native 基础

- [ ] 能够创建和导航多个页面
- [ ] 能够使用 Hooks 管理状态
- [ ] 能够处理表单输入和验证
- [ ] 能够使用 AsyncStorage 存储数据
- [ ] 能够发送 HTTP 请求

### Web3 基础

- [ ] 能够使用 Ganache 创建本地测试网络
- [ ] 能够使用 Web3.js 连接区块链
- [ ] 能够使用 Ethers.js 创建和管理钱包
- [ ] 能够发送和查询交易
- [ ] 能够监听区块链事件

### Wagmi 集成

- [ ] 能够配置 Wagmi 连接到 Ganache
- [ ] 能够使用 Wagmi Hooks 获取链上数据
- [ ] 能够使用 Wagmi 发送交易
- [ ] 能够使用 Wagmi 查询交易历史

### 钱包应用

- [ ] 能够创建和导入钱包
- [ ] 能够管理多个钱包
- [ ] 能够发送交易
- [ ] 能够查看交易历史
- [ ] 能够进行应用设置

---

## 🛠️ 技术栈总结

### 核心框架

- **React Native**: 0.81.5
- **Expo**: ~54.0.30
- **Expo Router**: ~6.0.21

### Web3 库

- **ethers.js**: 用于钱包管理和交易
- **web3.js**: 用于区块链交互（可选）
- **wagmi**: 用于 React Hooks 风格的 Web3 交互
- **viem**: Wagmi 的底层库

### 开发工具

- **Ganache**: 本地以太坊测试网络
- **TypeScript**: 类型安全
- **ESLint**: 代码检查

### 其他库

- **@react-native-async-storage/async-storage**: 数据持久化
- **react-native-qrcode-svg**: 二维码生成
- **react-native-toast-message**: Toast 提示
- **react-native-biometrics**: 生物识别（可选）

---

## 📚 推荐学习资源

### React Native

- [React Native 官方文档](https://reactnative.dev/)
- [Expo 文档](https://docs.expo.dev/)
- [React Native 中文网](https://www.react-native.cn/)

### Web3

- [以太坊官方文档](https://ethereum.org/zh/developers/)
- [Ethers.js 文档](https://docs.ethers.org/)
- [Web3.js 文档](https://web3js.readthedocs.io/)
- [Wagmi 文档](https://wagmi.sh/)

### 区块链基础

- [Mastering Ethereum](https://github.com/ethereumbook/ethereumbook)
- [以太坊白皮书](https://ethereum.org/zh/whitepaper/)

---

## 🎯 最终项目目标

完成一个功能完整的 React Native 区块链钱包应用，包含：

1. ✅ 钱包创建和导入
2. ✅ 多钱包管理
3. ✅ 发送和接收 ETH
4. ✅ 交易历史查询
5. ✅ 实时余额更新
6. ✅ 安全功能（密码、加密存储）
7. ✅ 设置和配置
8. ✅ 良好的用户体验和错误处理

---

## 💡 学习建议

1. **循序渐进**：按照阶段顺序学习，不要跳跃
2. **实践为主**：每个知识点都要动手实践
3. **记录问题**：遇到问题及时记录和解决
4. **代码审查**：定期回顾自己的代码，优化改进
5. **社区参与**：加入 React Native 和 Web3 社区，交流学习

---

**开始你的 Web3 钱包开发之旅吧！🚀**
